(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{580:function(t,e,n){"use strict";n.r(e);var a=n(62),s=Object(a.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"插件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#插件"}},[t._v("#")]),t._v(" 插件")]),t._v(" "),n("p",[t._v("loader 用于转换某些类型的模块，而"),n("strong",[t._v("插件")]),t._v("则可以用于执行范围更广的任务。包括：打包优化，资源管理，注入环境变量。")]),t._v(" "),n("p",[t._v("想要使用一个插件，你只需要 "),n("code",[t._v("require()")]),t._v(" 它，然后把它添加到 "),n("code",[t._v("plugins")]),t._v(" 数组中。多数插件可以通过选项("),n("code",[t._v("option")]),t._v(")自定义。你也可以在一个配置文件中因为不同目的而"),n("strong",[t._v("多次使用同一个插件")]),t._v("，这时需要通过使用 new 操作符来创建它的一个实例。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" HtmlWebpackPlugin "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'html-webpack-plugin'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 通过 npm 安装")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" webpack "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webpack'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 用于访问内置插件")]),t._v("\n\nmodule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  module"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    rules"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" test"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token regex"}},[n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.txt$")]),n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" use"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'raw-loader'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  plugins"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HtmlWebpackPlugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("template"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/index.html'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("webpack "),n("strong",[t._v("插件")]),t._v("是一个具有 "),n("code",[t._v("apply")]),t._v(" 方法的 JavaScript 对象.")]),t._v(" "),n("p",[n("code",[t._v("apply")]),t._v(" 方法会被 "),n("code",[t._v("webpack compiler")]),t._v(" 调用，并且在"),n("strong",[t._v("整个")]),t._v("编译生命周期都可以访问 "),n("code",[t._v("compiler")]),t._v(" 对象。")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("const fsExtra = require('fs-extra');\n\nfunction CopyDistWebpackPlugin(options) {\n\n    if (typeof options.from !== 'string' || !options.from) {\n        throw new Error('缺少 options.from 参数');\n    }\n    if (typeof options.to !== 'string' || !options.to) {\n        throw new Error('缺少 options.to 参数');\n    }\n    this.from = options.from;\n    this.to = options.to;\n}\n\nCopyDistWebpackPlugin.prototype.apply = function(compiler) {\n\n    compiler.plugin('done', (compilation) => {\n        var from = resolve(this.from);\n        var to = resolve(this.to);\n        fsExtra.copy(from, to).then(() => {\n            logger.success(`[${new Date().toLocaleString()}] copy [${from}] to [${to}] successfy.`);\n        }).catch(err => {\n            logger.error(`[${new Date().toLocaleString()}] copy [${from}] to [${to}] error: `, err);\n        });\n    });\n};\n\nmodule.exports = CopyDistWebpackPlugin;\n")])])]),n("h5",{attrs:{id:"用法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#用法"}},[t._v("#")]),t._v(" 用法")]),t._v(" "),n("p",[t._v("由于"),n("strong",[t._v("插件")]),t._v("可以携带参数/选项，你必须在 webpack 配置中，向 "),n("code",[t._v("plugins")]),t._v(" 属性传入一个 new 实例。")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('plugins: [\n    new CopyDistWebpackPlugin({\n        from: resolve("dist/static"),\n        to: resolve("../src/main/webapp/static")\n    })\n]\n')])])]),n("p",[t._v("自定义开发插件\n一般一个具体的 plugin 由下面部分组成：")]),t._v(" "),n("ul",[n("li",[t._v("一个具名 JavaScript 函数。")]),t._v(" "),n("li",[t._v("在它的原型上定义 apply 方法。")]),t._v(" "),n("li",[t._v("指定一个触及到 webpack 本身的 事件钩子。")]),t._v(" "),n("li",[t._v("操作 webpack 内部的实例特定数据。")]),t._v(" "),n("li",[t._v("在实现功能后调用 webpack 提供的 callback。")])]),t._v(" "),n("h4",{attrs:{id:"插件-plugins"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#插件-plugins"}},[t._v("#")]),t._v(" 插件 plugins:")]),t._v(" "),n("p",[n("code",[t._v("webpack.DefinePlugin")])]),t._v(" "),n("ul",[n("li",[t._v("主要：在编译阶段根据 NODE_ENV 自动切换配置文件，提升前端开发效率")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('plugins:[\n    new webpack.DefinePlugin({\n        "process.env.NODE_ENV": JSON.stringify(NODE_ENV)\n    }),\n]\n')])])]),n("ul",[n("li",[t._v("重点：凡是 src 下的文件，都可以访问到"),n("code",[t._v("process.env.NODE_ENV")]),t._v("这个变量")])]),t._v(" "),n("p",[n("code",[t._v("mini-css-extract-plugin")])]),t._v(" "),n("ul",[n("li",[t._v("插件是 webpack4+ 版本的，可以直接安装使用。这里只能把所有样式包括 css、less 都打包到一个 css 文件 common.css 中，然后再 link 进页面")])]),t._v(" "),n("p",[n("code",[t._v("webpack-manifest-plugin")])]),t._v(" "),n("ul",[n("li",[t._v("生成一份资源清单的 json 文件")])]),t._v(" "),n("p",[n("code",[t._v("Friendly-errors-webpack-plugin")])]),t._v(" "),n("ul",[n("li",[t._v("识别某些类别的 webpack 错误")])]),t._v(" "),n("p",[n("code",[t._v("HtmlWebpackPlugin")])]),t._v(" "),n("ul",[n("li",[t._v("简化了 HTML 文件的创建，以便为你的 webpack 包提供服务。该插件将为你生成一个 HTML5 文件， 其中包括使用 script 标签的 body 中的所有 webpack 包。")]),t._v(" "),n("li",[t._v("Options:\n"),n("table",[n("thead",[n("tr",[n("th",{attrs:{align:"center"}},[t._v("Name")]),t._v(" "),n("th",{attrs:{align:"center"}},[t._v("Type")]),t._v(" "),n("th",{attrs:{align:"center"}},[t._v("Default")]),t._v(" "),n("th",{attrs:{align:"left"}},[t._v("Description")])])]),t._v(" "),n("tbody",[n("tr",[n("td",{attrs:{align:"center"}},[n("strong",[n("code",[t._v("title")])])]),t._v(" "),n("td",{attrs:{align:"center"}},[n("code",[t._v("{String}")])]),t._v(" "),n("td",{attrs:{align:"center"}},[n("code",[t._v("Webpack App")])]),t._v(" "),n("td",{attrs:{align:"left"}},[t._v("The title to use for the generated HTML document")])]),t._v(" "),n("tr",[n("td",{attrs:{align:"center"}},[n("strong",[n("code",[t._v("filename")])])]),t._v(" "),n("td",{attrs:{align:"center"}},[n("code",[t._v("{String}")])]),t._v(" "),n("td",{attrs:{align:"center"}},[n("code",[t._v("'index.html'")])]),t._v(" "),n("td",{attrs:{align:"left"}},[t._v("The file to write the HTML to. Defaults to "),n("code",[t._v("index.html")]),t._v(". You can specify a subdirectory here too (eg: "),n("code",[t._v("assets/admin.html")]),t._v(")")])]),t._v(" "),n("tr",[n("td",{attrs:{align:"center"}},[n("strong",[n("code",[t._v("template")])])]),t._v(" "),n("td",{attrs:{align:"center"}},[n("code",[t._v("{String}")])]),t._v(" "),n("td",{attrs:{align:"center"}},[n("code",[t._v('</td> <td align="left"> <code>webpack</code> relative or absolute path to the template. By default it will use <code>src/index.ejs</code> if it exists. Please see the <a href="https://github.com/jantimon/html-webpack-plugin/blob/master/docs/template-option.md">docs</a> for details</td> </tr> <tr> <td align="center"><strong><code>templateContent</code></strong></td> <td align="center"><code>{string|Function|false}</code></td> <td align="center">false</td> <td align="left">Can be used instead of <code>template</code> to provide an inline template - please read the <a href="https://github.com/jantimon/html-webpack-plugin#writing-your-own-templates">Writing Your Own Templates</a> section</td> </tr> <tr> <td align="center"><strong><code>templateParameters</code></strong></td> <td align="center"><code>{Boolean|Object|Function}</code></td> <td align="center"><code>false</code></td> <td align="left">Allows to overwrite the parameters used in the template - see <a href="https://github.com/jantimon/html-webpack-plugin/tree/master/examples/template-parameters">example</a> </td> </tr> <tr> <td align="center"><strong><code>inject</code></strong></td> <td align="center"><code>{Boolean|String}</code></td> <td align="center"><code>true</code></td> <td align="left"> <code>true || \'head\' || \'body\' || false</code> Inject all assets into the given <code>template</code> or <code>templateContent</code>. When passing <code>\'body\'</code> all javascript resources will be placed at the bottom of the body element. <code>\'head\'</code> will place the scripts in the head element. Passing <code>true</code> will add it to the head/body depending on the <code>scriptLoading</code> option. Passing <code>false</code> will disable automatic injections. - see the <a href="https://github.com/jantimon/html-webpack-plugin/tree/master/examples/custom-insertion-position">inject:false example</a> </td> </tr> <tr> <td align="center"><strong><code>publicPath</code></strong></td> <td align="center"><code>{String|\'auto\'}</code></td> <td align="center"><code>\'auto\'</code></td> <td align="left">The publicPath used for script and link tags</td> </tr> <tr> <td align="center"><strong><code>scriptLoading</code></strong></td> <td align="center"><code>{\'blocking\'|\'defer\'}</code></td> <td align="center"><code>\'blocking\'</code></td> <td align="left">Modern browsers support non blocking javascript loading (<code>\'defer\'</code>) to improve the page startup performance.</td> </tr> <tr> <td align="center"><strong><code>favicon</code></strong></td> <td align="center"><code>{String}</code></td> <td align="center">')])]),t._v(" "),n("td",{attrs:{align:"left"}},[t._v("Adds the given favicon path to the output HTML")])]),t._v(" "),n("tr",[n("td",{attrs:{align:"center"}},[n("strong",[n("code",[t._v("meta")])])]),t._v(" "),n("td",{attrs:{align:"center"}},[n("code",[t._v("{Object}")])]),t._v(" "),n("td",{attrs:{align:"center"}},[n("code",[t._v("{}")])]),t._v(" "),n("td",{attrs:{align:"left"}},[t._v("Allows to inject "),n("code",[t._v("meta")]),t._v("-tags. E.g. "),n("code",[t._v("meta: {viewport: 'width=device-width, initial-scale=1, shrink-to-fit=no'}")])])]),t._v(" "),n("tr",[n("td",{attrs:{align:"center"}},[n("strong",[n("code",[t._v("base")])])]),t._v(" "),n("td",{attrs:{align:"center"}},[n("code",[t._v("{Object|String|false}")])]),t._v(" "),n("td",{attrs:{align:"center"}},[n("code",[t._v("false")])]),t._v(" "),n("td",{attrs:{align:"left"}},[t._v("Inject a "),n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/base",rel:"nofollow"}},[n("code",[t._v("base")])]),t._v(" tag. E.g. "),n("code",[t._v('base: "https://example.com/path/page.html')])])]),t._v(" "),n("tr",[n("td",{attrs:{align:"center"}},[n("strong",[n("code",[t._v("minify")])])]),t._v(" "),n("td",{attrs:{align:"center"}},[n("code",[t._v("{Boolean|Object}")])]),t._v(" "),n("td",{attrs:{align:"center"}},[n("code",[t._v("true")]),t._v(" if "),n("code",[t._v("mode")]),t._v(" is "),n("code",[t._v("'production'")]),t._v(", otherwise "),n("code",[t._v("false")])]),t._v(" "),n("td",{attrs:{align:"left"}},[t._v("Controls if and in what ways the output should be minified. See "),n("a",{attrs:{href:"#minification"}},[t._v("minification")]),t._v(" below for more details.")])]),t._v(" "),n("tr",[n("td",{attrs:{align:"center"}},[n("strong",[n("code",[t._v("hash")])])]),t._v(" "),n("td",{attrs:{align:"center"}},[n("code",[t._v("{Boolean}")])]),t._v(" "),n("td",{attrs:{align:"center"}},[n("code",[t._v("false")])]),t._v(" "),n("td",{attrs:{align:"left"}},[t._v("If "),n("code",[t._v("true")]),t._v(" then append a unique "),n("code",[t._v("webpack")]),t._v(" compilation hash to all included scripts and CSS files. This is useful for cache busting")])]),t._v(" "),n("tr",[n("td",{attrs:{align:"center"}},[n("strong",[n("code",[t._v("cache")])])]),t._v(" "),n("td",{attrs:{align:"center"}},[n("code",[t._v("{Boolean}")])]),t._v(" "),n("td",{attrs:{align:"center"}},[n("code",[t._v("true")])]),t._v(" "),n("td",{attrs:{align:"left"}},[t._v("Emit the file only if it was changed")])]),t._v(" "),n("tr",[n("td",{attrs:{align:"center"}},[n("strong",[n("code",[t._v("showErrors")])])]),t._v(" "),n("td",{attrs:{align:"center"}},[n("code",[t._v("{Boolean}")])]),t._v(" "),n("td",{attrs:{align:"center"}},[n("code",[t._v("true")])]),t._v(" "),n("td",{attrs:{align:"left"}},[t._v("Errors details will be written into the HTML page")])]),t._v(" "),n("tr",[n("td",{attrs:{align:"center"}},[n("strong",[n("code",[t._v("chunks")])])]),t._v(" "),n("td",{attrs:{align:"center"}},[n("code",[t._v("{?}")])]),t._v(" "),n("td",{attrs:{align:"center"}},[n("code",[t._v("?")])]),t._v(" "),n("td",{attrs:{align:"left"}},[t._v("Allows you to add only some chunks (e.g only the unit-test chunk)")])]),t._v(" "),n("tr",[n("td",{attrs:{align:"center"}},[n("strong",[n("code",[t._v("chunksSortMode")])])]),t._v(" "),n("td",{attrs:{align:"center"}},[n("code",[t._v("{String|Function}")])]),t._v(" "),n("td",{attrs:{align:"center"}},[n("code",[t._v("auto")])]),t._v(" "),n("td",{attrs:{align:"left"}},[t._v("Allows to control how chunks should be sorted before they are included to the HTML. Allowed values are "),n("code",[t._v("'none' | 'auto' | 'manual' | {Function}")])])]),t._v(" "),n("tr",[n("td",{attrs:{align:"center"}},[n("strong",[n("code",[t._v("excludeChunks")])])]),t._v(" "),n("td",{attrs:{align:"center"}},[n("code",[t._v("{Array.<string>}")])]),t._v(" "),n("td",{attrs:{align:"center"}},[t._v("``")]),t._v(" "),n("td",{attrs:{align:"left"}},[t._v("Allows you to skip some chunks (e.g don't add the unit-test chunk)")])]),t._v(" "),n("tr",[n("td",{attrs:{align:"center"}},[n("strong",[n("code",[t._v("xhtml")])])]),t._v(" "),n("td",{attrs:{align:"center"}},[n("code",[t._v("{Boolean}")])]),t._v(" "),n("td",{attrs:{align:"center"}},[n("code",[t._v("false")])]),t._v(" "),n("td",{attrs:{align:"left"}},[t._v("If "),n("code",[t._v("true")]),t._v(" render the "),n("code",[t._v("link")]),t._v(" tags as self-closing (XHTML compliant)")])])])])])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('\n"dependencies": {\n        "@babel/polyfill": "^7.6.0",\n        "babel-runtime": "^6.26.0",\n        "clipboard": "^2.0.4",\n        "console-polyfill": "^0.3.0",\n        "core-js": "^2.6.9",\n        "es5-shim": "^4.5.13",\n        "iscroll": "^5.2.0",\n        "jquery": "^1.12.4",\n        "jquery-ui": "^1.12.1",\n        "lodash": "^4.17.10",\n        "promise-polyfill": "^8.1.3",\n        "qartjs": "^1.1.2",\n        "velocity-animate": "^1.5.0",\n        "vue": "^2.6.10"\n    },\n    "devDependencies": {\n        "@babel/core": "^7.5.5",\n        "@babel/preset-env": "^7.5.5",\n        "autoprefixer": "^9.6.1",\n        "babel-core": "^6.26.3",\n        "babel-eslint": "^10.0.2",\n        "babel-loader": "^8.0.6",\n        "babel-plugin-transform-runtime": "^6.23.0",\n        "babel-preset-env": "^1.7.0",\n        "body-parser": "^1.18.3",\n        "chalk": "^2.4.2",\n        "clean-webpack-plugin": "^3.0.0",\n        "concurrently": "^4.1.2",\n        "copy-webpack-plugin": "^5.0.4",\n        "cross-env": "^5.2.0",\n        "css-loader": "^3.2.0",\n        "cssnano": "^4.1.10",\n        "eslint": "^6.1.0",\n        "eslint-friendly-formatter": "^4.0.1",\n        "eslint-loader": "^2.2.1",\n        "eslint-plugin-vue": "^6.0.1",\n        "express": "^4.17.1",\n        "file-loader": "^4.2.0",\n        "fs-extra": "^8.1.0",\n        "glob": "^7.1.4",\n        "html-loader": "^0.5.5",\n        "html-webpack-plugin": "^3.2.0",\n        "http-proxy-middleware": "^0.19.1",\n        "less": "^3.9.0",\n        "less-loader": "^5.0.0",\n        "lodash-webpack-plugin": "^0.11.5",\n        "mini-css-extract-plugin": "^0.8.0",\n        "mockjs": "^1.1.0",\n        "postcss-loader": "^3.0.0",\n        "shelljs": "^0.8.3",\n        "style-loader": "^1.0.0",\n        "url-loader": "^2.1.0",\n        "vue-eslint-parser": "^7.0.0",\n        "vue-loader": "^15.7.1",\n        "vue-style-loader": "^4.1.2",\n        "vue-template-compiler": "^2.6.10",\n        "watch": "^1.0.2",\n        "webpack": "^4.39.1",\n        "webpack-cli": "^3.3.6",\n        "webpack-dev-server": "^3.8.0",\n        "webpack-manifest-plugin": "^2.0.4",\n        "webpack-merge": "^4.2.1"\n    },\n')])])]),n("h2",{attrs:{id:"webpack5常用的插件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#webpack5常用的插件"}},[t._v("#")]),t._v(" Webpack5常用的插件")]),t._v(" "),n("h3",{attrs:{id:"webpack内置模块"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#webpack内置模块"}},[t._v("#")]),t._v(" webpack内置模块")]),t._v(" "),n("ul",[n("li",[t._v("热替换")]),t._v(" "),n("li",[t._v("作用域提升")]),t._v(" "),n("li",[t._v("分包、抽离公共代码")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('plugins: [\n    //开启HMR(热替换功能,替换更新部分,不重载页面！)\n    new webpack.HotModuleReplacementPlugin(),\n    // 作用域提升,提升代码在浏览器执行速度\n    new webpack.optimize.ModuleConcatenationPlugin(),\n],\noptimization: {\n// 分包、抽离公共代码\n    splitChunks: {\n      chunks: "all",\n      minSize: 30000, // 形成一个新代码块最小的体积\n      maxAsyncRequests: 5, // 按需加载时候最大的并行请求数\n      maxInitialRequests: 3, // 最大初始化请求数\n      automaticNameDelimiter: "~", // 打包分割符\n      cacheGroups: {\n        // 打包第三方库\n        vendors: {\n          name: `chunk-vendors`,\n          test: /[/]node_modules[/]/,\n          priority: -10, // 优先级\n          chunks: "initial",\n        },\n        // 打包其余的的公共代码\n        common: {\n          name: `chunk-common`,\n          minChunks: 2, // 引入两次及以上被打包\n          priority: -20,\n          chunks: "initial",\n          reuseExistingChunk: true,\n        },\n      },\n    },\n  },\n')])])]),n("h3",{attrs:{id:"webpack-merge"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#webpack-merge"}},[t._v("#")]),t._v(" webpack-merge")]),t._v(" "),n("p",[t._v("该插件用于合并配置。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" merge "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webpack-merge'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" devModule "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("merge")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("object1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" object2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" object3"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h3",{attrs:{id:"webpack-dev-server"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#webpack-dev-server"}},[t._v("#")]),t._v(" webpack-dev-server")]),t._v(" "),n("p",[t._v("该插件提供服务重新加载，仅用于开发。")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('// config.js\ndevConf: {\n      env: "development",\n      publicPath: "/",\n      host: "localhost",\n      port: "8080",\n      assetsSubDirectory: "static",\n      devtoolType: "cheap-module-eval-source-map",\n      proxyTable: {\n        "/client_demo_api": {\n          target: "http://localhost:3000/client_demo_api/",\n          changeOrigin: true,\n          pathRewrite: {\n            "^/client_demo_api": "/",\n          },\n        },\n      },\n    }\n// webpack.dev.conf.js\n// 启动一个本地服务器,可进行本地开发\n  devServer: {\n    hot: true, // 热加载\n    open: true, // 自动打开浏览器\n    historyApiFallback: true, // 在开发单页应用时非常有用，它依赖于HTML5 history API，如果设置为true，所有的跳转将指向index.html\n    host: devConf.host,\n    port: devConf.port,\n    proxy: devConf.proxyTable, // 配置反向代理解决跨域\n    compress: true, // 压缩代码\n    client: {\n      // 在浏览器上全屏显示编译的errors\n      overlay: {\n        errors: true,\n        warnings: false,\n      },\n    },\n  },\n// package.json\n"scripts": {\n    "dev:admin": "cross-env NODE_ENV_TYPE=admin webpack-dev-server --config build/webpack.dev.conf.js",\n    "dev:client": "cross-env NODE_ENV_TYPE=client webpack-dev-server --config build/webpack.dev.conf.js",\n },\n')])])]),n("h3",{attrs:{id:"mini-css-extract-plugin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mini-css-extract-plugin"}},[t._v("#")]),t._v(" mini-css-extract-plugin")]),t._v(" "),n("p",[t._v("该插件把CSS提取到单独的文件中。通过link标签嵌入打包出的html文件里。而style-loader是通过style标签内嵌在html文件里。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" MiniCssExtractPlugin "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mini-css-extract-plugin"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  plugins"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MiniCssExtractPlugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    filename"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("assetsPath")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"css/[name].[chunkhash].css"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n     chunkFilename"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("assetsPath")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"css/[name].[chunkhash].css"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  module"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    rules"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        test"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token regex"}},[n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.css$")]),n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        use"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("MiniCssExtractPlugin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("loader"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" loader"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"css-loader"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        test"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token regex"}},[n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.less$")]),n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        use"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n          MiniCssExtractPlugin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("loader"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" loader"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"css-loader"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" loader"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"less-loader"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            loader"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"style-resources-loader"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            options"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              patterns"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./theme.less"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("相比于extract-text-webpack-plugin插件：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[t._v("异步加载\n没有重复编译(性能)\n更容易使用\n特定于CSS\n")])])]),n("h3",{attrs:{id:"html-webpack-plugin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#html-webpack-plugin"}},[t._v("#")]),t._v(" html-webpack-plugin")]),t._v(" "),n("p",[t._v("该插件会生成一个HTML文件,把所有webpack打包后的文件用脚本标签嵌入进去。")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("const HtmlWebpackPlugin = require('html-webpack-plugin')\n\nmodule.exports = {\n  entry: 'index.js',\n  output: {\n    path: __dirname + '/dist',\n    filename: 'index_bundle.js'\n  },\n  plugins: [\n    new HtmlWebpackPlugin({\n            //指定模板 不指定会生成一个默认的html页面（空的）\n            template: './src/my-index.html',\n            //输出后的文件名\n            filename: 'index.html',\n            inject: true,\n            //控制压缩\n           minify: {\n                removeComments: true, // 删除html注释\n                collapseWhitespace: true, // 去除空格\n                removeRedundantAttributes: true, // 删除多余的属性\n              },\n        })\n  ]\n}\n")])])]),n("p",[t._v("会生成dist/index.html文件，内容如下：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset="utf-8">\n    <title>Webpack App</title>\n    <script src="index_bundle.js"><\/script>\n  </head>\n  <body>\n  </body>\n</html>\n')])])]),n("h3",{attrs:{id:"terserplugin-和-cssminimizerplugin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#terserplugin-和-cssminimizerplugin"}},[t._v("#")]),t._v(" TerserPlugin 和 CssMinimizerPlugin")]),t._v(" "),n("p",[t._v("分别用来压缩js和css。")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('// 压缩js\nconst TerserPlugin = require("terser-webpack-plugin");\n// 压缩css\nconst CssMinimizerPlugin = require("css-minimizer-webpack-plugin");\n\noptimization: {\n    moduleIds: "deterministic", // 被哈希转化成的小位数值模块名\n    minimizer: [\n      new TerserPlugin({\n        parallel: true,\n        terserOptions: {\n          format: {\n            comments: false, // 删除注释\n          },\n        },\n      }),\n      new CssMinimizerPlugin({\n        parallel: true,\n        minimizerOptions: {\n          preset: [\n            "default",\n            {\n              discardComments: { removeAll: true }, // 删除注释\n            },\n          ],\n        },\n      }),\n    ],\n  },\n')])])]),n("h3",{attrs:{id:"compression-webpack-plugin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#compression-webpack-plugin"}},[t._v("#")]),t._v(" compression-webpack-plugin")]),t._v(" "),n("p",[t._v("是否开启Gzip压缩。nginx上需要对Gzip进行相关配置")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('const CompressionWebpackPlugin = require("compression-webpack-plugin");\n\nplugins: [\n  new CompressionPlugin({\n      filename: "[path][base].gz",\n      algorithm: "gzip",\n      test: /\\.js$|\\.css$|\\.html$/,\n      threshold: 10240,\n      minRatio: 0.8,\n    }),\n  ],\n')])])]),n("h3",{attrs:{id:"webpack-bundle-analyzer"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#webpack-bundle-analyzer"}},[t._v("#")]),t._v(" webpack-bundle-analyzer")]),t._v(" "),n("p",[t._v("项目打包后，进行性能分析")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('// webapck.prod.conf.js\nif (process.env.analyz_npm_config_report) {\n  const BundleAnalyzerPlugin = require("webpack-bundle-analyzer")\n    .BundleAnalyzerPlugin;\n  prod.plugins.push(new BundleAnalyzerPlugin());\n}\n// package.json\n"analyz:admin": "cross-env analyz_npm_config_report=true npm run build:admin",\n"analyz:client": "cross-env analyz_npm_config_report=true npm run build:client",\n9、friendly-errors-webpack-plugin\n友好的编译提示，搭配上一个node模块node-notifier，可以让系统在桌面发送通知。\n\nconst FriendlyErrorsPlugin = require("friendly-errors-webpack-plugin");\n// 系统桌面通知\nconst notifier = require("node-notifier");\n\nplugins: [\n    // 编译提示\n    new FriendlyErrorsPlugin({\n      // 编译成功\n      compilationSuccessInfo: {\n        messages: [\n          `Your application is running here: http://${devConf.host}:${devConf.port}`,\n        ],\n      },\n      // 编译出错\n      onErrors: (severity, errors) => {\n        if (severity !== "error") {\n          return;\n        }\n        const error = errors[0];\n        // 编译出错时,系统右下角弹出错误提示\n        notifier.notify({\n          title: "Webpack error",\n          message: severity + ": " + error.name,\n          subtitle: error.file || "",\n        });\n      },\n      clearConsole: true, // 每次编译之间清除控制台\n    }),\n  ],\n')])])])])}),[],!1,null,null,null);e.default=s.exports}}]);