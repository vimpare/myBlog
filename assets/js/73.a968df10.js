(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{577:function(e,n,a){"use strict";a.r(n);var s=a(62),t=Object(s.a)({},(function(){var e=this,n=e.$createElement,a=e._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h3",{attrs:{id:"使用-source-map"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-source-map"}},[e._v("#")]),e._v(" 使用 source map")]),e._v(" "),a("p",[e._v("为了更容易地追踪错误和警告，JavaScript 提供了 source map 功能，将编译后的代码映射回原始源代码。如果一个错误来自于 b.js，source map 就会明确的告诉你。\n"),a("strong",[e._v("仅解释说明，不要用于生产环境")])]),e._v(" "),a("p",[e._v("webpack.config.js")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("  const path = require('path');\n  const HtmlWebpackPlugin = require('html-webpack-plugin');\n  const CleanWebpackPlugin = require('clean-webpack-plugin');\n\n  module.exports = {\n    entry: {\n      app: './src/index.js',\n      print: './src/print.js'\n    },\n+   devtool: 'inline-source-map',\n    plugins: [\n      new CleanWebpackPlugin(['dist']),\n      new HtmlWebpackPlugin({\n        title: 'Development'\n      })\n    ],\n    output: {\n      filename: '[name].bundle.js',\n      path: path.resolve(__dirname, 'dist')\n    }\n  };\n")])])]),a("p",[a("strong",[e._v("选择一个开发工具")])]),e._v(" "),a("p",[e._v("使用观察模式")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('package.json\n\n  {\n    "name": "development",\n    "version": "1.0.0",\n    "description": "",\n    "main": "webpack.config.js",\n    "scripts": {\n      "test": "echo \\"Error: no test specified\\" && exit 1",\n+     "watch": "webpack --watch",\n      "build": "webpack"\n    },\n    "keywords": [],\n    "author": "",\n    "license": "ISC",\n    "devDependencies": {\n      "clean-webpack-plugin": "^0.1.16",\n      "css-loader": "^0.28.4",\n      "csv-loader": "^2.1.1",\n      "file-loader": "^0.11.2",\n      "html-webpack-plugin": "^2.29.0",\n      "style-loader": "^0.18.2",\n      "webpack": "^3.0.0",\n      "xml-loader": "^1.2.1"\n    }\n  }\n')])])]),a("p",[e._v("运行 "),a("code",[e._v("npm run watch")]),e._v("，就会看到 webpack 编译代码，然而却不会退出命令行。这是因为 script 脚本还在观察文件。")]),e._v(" "),a("p",[e._v("唯一的缺点是，为了看到修改后的实际效果，你需要刷新浏览器。")]),e._v(" "),a("p",[e._v("使用 webpack-dev-server")]),e._v(" "),a("p",[e._v("webpack-dev-server 为你提供了一个简单的 web 服务器，并且能够实时重新加载(live reloading)")]),e._v(" "),a("p",[a("code",[e._v("npm install --save-dev webpack-dev-server")])]),e._v(" "),a("p",[e._v("修改配置文件，告诉开发服务器(dev server)，在哪里查找文件：")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("webpack.config.js\n\n  const path = require('path');\n  const HtmlWebpackPlugin = require('html-webpack-plugin');\n  const CleanWebpackPlugin = require('clean-webpack-plugin');\n\n  module.exports = {\n    entry: {\n      app: './src/index.js',\n      print: './src/print.js'\n    },\n    devtool: 'inline-source-map',\n+   devServer: {\n+     contentBase: './dist'\n+   },\n    plugins: [\n      new CleanWebpackPlugin(['dist']),\n      new HtmlWebpackPlugin({\n        title: 'Development'\n      })\n    ],\n    output: {\n      filename: '[name].bundle.js',\n      path: path.resolve(__dirname, 'dist')\n    }\n  };\n")])])]),a("p",[e._v("以上配置告知 webpack-dev-server，在 localhost:8080 下建立服务，将 dist 目录下的文件，作为可访问文件。")]),e._v(" "),a("p",[e._v("让我们添加一个 script 脚本，可以直接运行开发服务器(dev server)：")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('package.json\n\n  {\n    "name": "development",\n    "version": "1.0.0",\n    "description": "",\n    "main": "webpack.config.js",\n    "scripts": {\n      "test": "echo \\"Error: no test specified\\" && exit 1",\n      "watch": "webpack --watch",\n+     "start": "webpack-dev-server --open",\n      "build": "webpack"\n    },\n    "keywords": [],\n    "author": "",\n    "license": "ISC",\n    "devDependencies": {\n      "clean-webpack-plugin": "^0.1.16",\n      "css-loader": "^0.28.4",\n      "csv-loader": "^2.1.1",\n      "file-loader": "^0.11.2",\n      "html-webpack-plugin": "^2.29.0",\n      "style-loader": "^0.18.2",\n      "webpack": "^3.0.0",\n      "xml-loader": "^1.2.1"\n    }\n  }\n')])])]),a("p",[e._v("现在，我们可以在命令行中运行 npm start，就会看到浏览器自动加载页面")]),e._v(" "),a("p",[e._v("使用 webpack-dev-middleware")]),e._v(" "),a("p",[e._v("webpack-dev-middleware 是一个容器(wrapper)，它可以把 webpack 处理后的文件传递给一个服务器(server)。 webpack-dev-server 在内部使用了它，同时，它也可以作为一个单独的包来使用，以便进行更多自定义设置来实现更多的需求\n首先，安装 express 和 webpack-dev-middleware：")]),e._v(" "),a("p",[a("code",[e._v("npm install --save-dev express webpack-dev-middleware")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("webpack.config.js\n\n  const path = require('path');\n  const HtmlWebpackPlugin = require('html-webpack-plugin');\n  const CleanWebpackPlugin = require('clean-webpack-plugin');\n\n  module.exports = {\n    entry: {\n      app: './src/index.js',\n      print: './src/print.js'\n    },\n    devtool: 'inline-source-map',\n    plugins: [\n      new CleanWebpackPlugin(['dist']),\n      new HtmlWebpackPlugin({\n        title: 'Output Management'\n      })\n    ],\n    output: {\n      filename: '[name].bundle.js',\n      path: path.resolve(__dirname, 'dist'),\n+     publicPath: '/'\n    }\n  };\n\n")])])]),a("p",[e._v("publicPath 也会在服务器脚本用到，以确保文件资源能够在 http://localhost:3000 下正确访问\nproject")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("  webpack-demo\n  |- package.json\n  |- webpack.config.js\n+ |- server.js\n  |- /dist\n  |- /src\n    |- index.js\n    |- print.js\n  |- /node_modules\n\n")])])]),a("p",[e._v("package.json")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('  {\n    "name": "development",\n    "version": "1.0.0",\n    "description": "",\n    "main": "webpack.config.js",\n    "scripts": {\n      "test": "echo \\"Error: no test specified\\" && exit 1",\n      "watch": "webpack --watch",\n      "start": "webpack-dev-server --open",\n+     "server": "node server.js",\n      "build": "webpack"\n    },\n    "keywords": [],\n    "author": "",\n    "license": "ISC",\n    "devDependencies": {\n      "clean-webpack-plugin": "^0.1.16",\n      "css-loader": "^0.28.4",\n      "csv-loader": "^2.1.1",\n      "express": "^4.15.3",\n      "file-loader": "^0.11.2",\n      "html-webpack-plugin": "^2.29.0",\n      "style-loader": "^0.18.2",\n      "webpack": "^3.0.0",\n      "webpack-dev-middleware": "^1.12.0",\n      "xml-loader": "^1.2.1"\n    }\n  }\n')])])]),a("p",[e._v("现在，在你的终端执行 "),a("code",[e._v("npm run server")]),e._v("\n现在，打开浏览器，跳转到 "),a("code",[e._v("http://localhost:3000")])])])}),[],!1,null,null,null);n.default=t.exports}}]);